<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Design and Order System</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f4f4f9;margin:0;padding:0;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;}
    .container{background:#fff;margin:30px;padding:22px;border-radius:10px;box-shadow:0 4px 20px rgba(0,0,0,0.08);width:100%;max-width:760px;}
    h1,h2{text-align:center;margin:0 0 12px 0}
    label{font-weight:700;display:block;margin-top:12px}
    input,select,button,textarea{width:100%;padding:10px;margin-top:6px;border-radius:6px;border:1px solid #ccc;box-sizing:border-box}
    button{background:#007bff;color:#fff;border:none;cursor:pointer}
    button[disabled]{opacity:.6;cursor:not-allowed}
    button:hover:not([disabled]){background:#0056b3}
    .hidden{display:none}
    .section{margin-top:18px}
    .summary{background:#f0f0f5;padding:14px;border-radius:8px;margin-top:12px}
    .row{display:flex;gap:10px}
    .col{flex:1}
    .small{font-size:13px;color:#444}
    .muted{color:#666;font-size:13px}
    .success{color:green;font-weight:700;margin-top:12px}
  </style>
</head>
<body>
  <div class="container">
    <h1>Design & Order Zone</h1>

    <!-- Step 1 -->
    <div id="step1">
      <label>Select a Service:</label>
      <select id="serviceType">
        <option value="">-- Select --</option>
        <option value="certificate">Certificate Design and Order</option>
        <option value="letter">Letter Design and Order</option>
      </select>
      <button onclick="goToStep2()">Next</button>
    </div>

    <!-- Step 2 MAIN -->
    <div id="step2" class="hidden">
      <!-- LETTER (existing) -->
      <div id="letterSection" class="section hidden">
        <h2>Letter Design and Order</h2>

        <label>Upload Front Page (PDF/DOC):</label>
        <input type="file" id="frontPage" accept=".pdf,.doc,.docx" />

        <label>Upload Back Page (PDF/DOC):</label>
        <input type="file" id="backPage" accept=".pdf,.doc,.docx" />

        <label>Select Paper Size:</label>
        <select id="paperSize">
          <option value="">-- Select Size --</option>
          <option value="A4">A4</option>
          <option value="A3">A3</option>
          <option value="A5">A5</option>
        </select>

        <label>Select Color:</label>
        <select id="colorOption" onchange="updateLetterRate()">
          <option value="">-- Select Color --</option>
          <option value="Black and White">Black and White</option>
          <option value="Blue">Blue</option>
          <option value="RGB">RGB Color</option>
        </select>

        <p id="letterRateInfo" class="small muted"></p>

        <label>Number of Letters:</label>
        <input type="number" id="copies" min="1" placeholder="Enter number of letters" />

        <div style="margin-top:12px">
          <label><input type="checkbox" id="letterNeedDesign" onchange="toggleLetterDesign()"> I have not designed the letter</label>
        </div>

        <div id="letterDesignForm" class="hidden" style="margin-top:12px;padding:12px;border:1px dashed #ddd;border-radius:8px">
          <label>Upload Letter File (your format):</label>
          <input type="file" id="uploadLetter" accept=".pdf,.doc,.docx" />

          <label>Select Paper Size (for this uploaded letter):</label>
          <select id="designPaperSize">
            <option value="">-- Select Size --</option>
            <option value="A4">A4</option>
            <option value="A3">A3</option>
            <option value="A5">A5</option>
          </select>

          <label><input type="checkbox" id="checkConfirm"> All words and paragraphs are correct as per uploaded format</label>

          <div id="orderOptions" class="hidden">
            <label>Number of Copies:</label>
            <input type="number" id="designCopies" min="1" />

            <label>Select Color:</label>
            <select id="designColor" onchange="updateDesignRate()">
              <option value="">-- Select Color --</option>
              <option value="Black and White">Black and White</option>
              <option value="Blue">Blue</option>
              <option value="RGB">RGB Color</option>
            </select>
            <p id="designRateInfo" class="small muted"></p>

            <button onclick="previewDesignOrder()">Preview Order</button>
          </div>
        </div>

        <div style="margin-top:12px">
          <button onclick="previewLetterOrder()">Preview Order</button>
        </div>
      </div>

      <!-- CERTIFICATE -->
      <div id="certificateSection" class="section hidden">
        <h2>Certificate Design & Order</h2>

        <label>Have a designed certificate (upload .doc/.pdf):</label>
        <input type="file" id="certUpload" accept=".pdf,.doc,.docx" />

        <label>Or request a certificate design:</label>
        <label><input type="checkbox" id="certNeedDesign" onchange="toggleCertDesign()"> I need a certificate designed</label>

        <div id="certDesignArea" class="hidden" style="margin-top:12px;padding:12px;border:1px dashed #ddd;border-radius:8px">
          <label>Upload sample / instructions (optional):</label>
          <input type="file" id="certDesignUpload" accept=".pdf,.doc,.docx,image/*" />
          <label>Choose orientation:</label>
          <select id="certOrientation">
            <option value="Portrait">Portrait</option>
            <option value="Landscape">Landscape</option>
          </select>
        </div>

        <label>Select Paper Size (choose one):</label>
        <select id="certPaperSize" onchange="updateCertRate()">
          <option value="">-- Select Size --</option>
          <option value="A0">A0 — 841 x 1189 mm</option>
          <option value="A1">A1 — 594 x 841 mm</option>
          <option value="A2">A2 — 420 x 594 mm</option>
          <option value="A3">A3 — 297 x 420 mm</option>
          <option value="A4">A4 — 210 x 297 mm</option>
          <option value="A5">A5 — 148 x 210 mm</option>
          <option value="A6">A6 — 105 x 148 mm</option>
        </select>

        <p class="small muted">Certificates are printed in <strong>RGB color</strong> only.</p>
        <p id="certRateInfo" class="small muted"></p>

        <label>Number of Certificates:</label>
        <input type="number" id="certCopies" min="1" />

        <div style="margin-top:12px">
          <button onclick="previewCertOrder()">Preview Certificate Order</button>
        </div>
      </div>

      <!-- CARD (placeholder minimal) -->
      <div id="cardSection" class="section hidden">
        <h2>Card Design and Order</h2>
        <p class="small muted">(Card ordering - minimal demo.)</p>
        <label>Upload Card File:</label>
        <input type="file" id="cardUpload" accept=".pdf,.doc,.docx,image/*" />
        <label>Select Paper Size:</label>
        <select id="cardPaper">
          <option value="A5">A5</option>
          <option value="A6">A6</option>
        </select>
        <label>Copies:</label>
        <input type="number" id="cardCopies" min="1" />
        <button onclick="previewCardOrder()">Preview Card Order</button>
      </div>
    </div>

    <!-- Step 3 Preview -->
    <div id="step3" class="hidden section">
      <div class="summary">
        <h2>Order Summary</h2>
        <p><strong>Service:</strong> <span id="sumService"></span></p>
        <p><strong>Paper Size:</strong> <span id="sumPaperSize"></span></p>
        <p><strong>Orientation:</strong> <span id="sumOrientation"></span></p>
        <p><strong>Color:</strong> <span id="sumColor"></span></p>
        <p><strong>Rate per Page:</strong> ₹<span id="sumRate"></span></p>
        <p><strong>Copies:</strong> <span id="sumCopies"></span></p>
        <p><strong>Total Cost:</strong> ₹<span id="sumTotal"></span></p>
      </div>

      <div style="margin-top:12px">
        <button onclick="showPlaceOrderForm()">Place Order</button>
        <button onclick="goHome()" style="background:#6c757d; margin-left:8px">Cancel</button>
      </div>
    </div>

    <!-- Place Order Form -->
    <div id="placeOrder" class="hidden section">
      <h2>Place Order — Delivery Details (India only)</h2>

      <label>State:</label>
      <select id="stateSelect" disabled>
        <option value="Assam">Assam</option>
      </select>

      <label>District:</label>
      <select id="districtSelect">
        <option value="">-- Select District --</option>
        <option>Kamrup Metropolitan</option>
        <option>Kamrup</option>
        <option>Dibrugarh</option>
        <option>Tinsukia</option>
        <option>Sivasagar</option>
        <option>Jorhat</option>
        <option>Nagaon</option>
        <option>Golaghat</option>
        <option>Sonitpur</option>
        <option>Lakhimpur</option>
        <option>Karbi Anglong</option>
        <option>Kokrajhar</option>
        <option>Dhubri</option>
        <option>Bongaigaon</option>
        <option>Barpeta</option>
        <option>Morigaon</option>
        <option>Hailakandi</option>
        <option>Cachar</option>
        <option>Karimganj</option>
        <option>Nalbari</option>
        <option>Chirang</option>
        <option>Baksa</option>
        <option>Udalguri</option>
        <option>Darrang</option>
        <option>Goalpara</option>
        <option>West Karbi Anglong</option>
      </select>

      <label>Pincode:</label>
      <input type="text" id="pincode" placeholder="6-digit pincode" maxlength="6" />

      <label>Village / Town:</label>
      <input type="text" id="village" />

      <label>Phone Number:</label>
      <input type="tel" id="phone" placeholder="10 digit mobile number" maxlength="10" />

      <div style="margin-top:12px">
        <button onclick="gotoPayment()">Proceed to Payment</button>
      </div>
    </div>

    <!-- Payment -->
    <div id="payment" class="hidden section">
      <h2>Payment Method</h2>
      <label><input type="radio" name="pay" value="upi" checked onchange="onPaymentChange()"> UPI Payment</label>
      <label><input type="radio" name="pay" value="cod" onchange="onPaymentChange()"> Cash on Delivery (COD)</label>

      <div id="upiArea" style="margin-top:12px">
        <label>Enter UPI ID (example: name@bank):</label>
        <input type="text" id="upiId" placeholder="name@upi" />
        <button onclick="verifyUpi()" id="verifyUpiBtn">Verify UPI</button>
        <p id="upiStatus" class="small muted"></p>

        <div style="margin-top:12px">
          <p class="small muted">Quick-pay links: (simulate) GPay / PhonePe / Paytm — clicking will simulate payment</p>
          <div class="row" style="margin-top:6px">
            <div class="col"><button onclick="simulateUpiPayment('gpay')">Pay with GPay</button></div>
            <div class="col"><button onclick="simulateUpiPayment('phonepe')">Pay with PhonePe</button></div>
            <div class="col"><button onclick="simulateUpiPayment('paytm')">Pay with Paytm</button></div>
          </div>
        </div>
      </div>

      <div id="codArea" class="hidden" style="margin-top:12px">
        <p class="small muted">You chose Cash on Delivery. Please have exact cash ready. Delivery within 7 days after confirmation.</p>
        <button onclick="completeOrder('cod')">Confirm COD Order</button>
      </div>

      <div id="finalMsg" class="hidden success"></div>
    </div>
  </div>

<script>
  // Globals for order summary
  let order = {
    service: null,
    paperSize: null,
    orientation: '',
    color: null,
    rate: 0,
    copies: 0,
    total: 0,
    delivery: {}
  };

  function goToStep2(){
    const s = document.getElementById('serviceType').value;
    if(!s){ alert('Please select a service.'); return; }
    // show appropriate section
    document.getElementById('step1').classList.add('hidden');
    document.getElementById('step2').classList.remove('hidden');

    // hide all subsections then show required one
    ['letterSection','certificateSection','cardSection'].forEach(id=>document.getElementById(id).classList.add('hidden'));
    if(s==='letter') document.getElementById('letterSection').classList.remove('hidden');
    if(s==='certificate') document.getElementById('certificateSection').classList.remove('hidden');
    if(s==='card') document.getElementById('cardSection').classList.remove('hidden');
    order.service = s;
  }

  // LETTER FUNCTIONS
  function toggleLetterDesign(){
    const checked = document.getElementById('letterNeedDesign').checked;
    document.getElementById('letterDesignForm').classList.toggle('hidden', !checked);
    // wire confirmation checkbox
    const ck = document.getElementById('checkConfirm');
    if(ck){
      ck.onchange = function(){ document.getElementById('orderOptions').classList.toggle('hidden', !this.checked); };
    }
  }

  function updateLetterRate(){
    const paper = document.getElementById('paperSize').value;
    const color = document.getElementById('colorOption').value;
    const info = document.getElementById('letterRateInfo');
    let rate = 0;
    if(paper === 'A4'){
      rate = (color === 'RGB')?17: (color==='Black and White' || color==='Blue')?2:0;
    } else if(paper === 'A3'){
      rate = (color === 'RGB')?30: (color==='Black and White' || color==='Blue')?5:0;
    } else if(paper === 'A5'){
      // no special rates given for A5 in letter path; default to A4 behavior (you can change)
      rate = (color === 'RGB')?17: (color==='Black and White' || color==='Blue')?2:0;
    } else { rate = 0; }
    order.rate = rate;
    info.textContent = rate ? `Rate per letter: ₹${rate}` : '';
  }

  function updateDesignRate(){
    const paper = document.getElementById('designPaperSize').value;
    const color = document.getElementById('designColor').value;
    const info = document.getElementById('designRateInfo');
    let rate = 0;
    if(paper === 'A4'){
      rate = (color === 'RGB')?17: (color==='Black and White' || color==='Blue')?2:0;
    } else if(paper === 'A3'){
      rate = (color === 'RGB')?30: (color==='Black and White' || color==='Blue')?5:0;
    } else if(paper === 'A5'){
      rate = (color === 'RGB')?17: (color==='Black and White' || color==='Blue')?2:0;
    }
    order.rate = rate;
    info.textContent = rate ? `Rate per letter: ₹${rate}` : '';
  }

  function previewLetterOrder(){
    // prefer design form if checked and its orderOptions visible
    if(document.getElementById('letterNeedDesign').checked && document.getElementById('orderOptions').classList.contains('hidden')){
      alert('Please confirm that all words/paragraphs are true (tick the checkbox) and fill order options.');
      return;
    }
    const paper = document.getElementById('paperSize').value || document.getElementById('designPaperSize').value;
    const color = document.getElementById('colorOption').value || document.getElementById('designColor').value;
    const copies = parseInt(document.getElementById('copies').value) || parseInt(document.getElementById('designCopies').value);
    if(!paper || !color || !copies) { alert('Please fill paper size, color and number of copies.'); return; }
    if(!order.rate || order.rate===0){ alert('Please select valid color/size to determine rate.'); return; }

    order.service = 'Letter';
    order.paperSize = paper;
    order.orientation = ''; // not relevant for letter
    order.color = color;
    order.copies = copies;
    order.total = order.rate * copies;

    showSummary();
  }

  function previewDesignOrder(){
    // called when user used the design form
    const paper = document.getElementById('designPaperSize').value;
    const color = document.getElementById('designColor').value;
    const copies = parseInt(document.getElementById('designCopies').value);
    if(!paper || !color || !copies) { alert('Complete all design order fields.'); return; }
    if(!order.rate || order.rate===0){ alert('Select paper+color to compute rate.'); return; }

    order.service = 'Letter';
    order.paperSize = paper;
    order.orientation = '';
    order.color = color;
    order.copies = copies;
    order.total = order.rate * copies;
    showSummary();
  }

  // CERTIFICATE FUNCTIONS
  function toggleCertDesign(){
    const show = document.getElementById('certNeedDesign').checked;
    document.getElementById('certDesignArea').classList.toggle('hidden', !show);
  }

  function updateCertRate(){
    // you said "rate of A4 size 13 rupees, A3 size 24 ruppes A5 8 rupees per page all size of page"
    // interpret as: use those rates for A4/A3/A5; if other sizes pick nearest values (we will map A0/A1/A2/A6 to A3/A4/A5 respectively)
    const paper = document.getElementById('certPaperSize').value;
    const info = document.getElementById('certRateInfo');
    let rate = 0;
    switch(paper){
      case 'A4': rate = 13; break;
      case 'A3': rate = 24; break;
      case 'A5': rate = 8; break;
      case 'A0': rate = 24; break; // large sizes — map to A3 rate
      case 'A1': rate = 24; break;
      case 'A2': rate = 24; break;
      case 'A6': rate = 8; break;
      default: rate = 0;
    }
    order.rate = rate;
    info.textContent = rate ? `Rate per certificate (RGB only): ₹${rate}` : '';
  }

  function previewCertOrder(){
    const paper = document.getElementById('certPaperSize').value;
    const copies = parseInt(document.getElementById('certCopies').value);
    const orientation = document.getElementById('certOrientation').value || 'Portrait';
    if(!paper || !copies){ alert('Select paper size and number of certificates.'); return; }
    if(!order.rate || order.rate===0){ alert('Select paper size to compute rate.'); return; }
    order.service = 'Certificate';
    order.paperSize = paper;
    order.orientation = orientation;
    order.color = 'RGB';
    order.copies = copies;
    order.total = order.rate * copies;
    showSummary();
  }

  // CARD preview (minimal)
  function previewCardOrder(){
    const paper = document.getElementById('cardPaper').value;
    const copies = parseInt(document.getElementById('cardCopies').value);
    if(!copies){ alert('Enter copies'); return; }
    order.service = 'Card';
    order.paperSize = paper;
    order.orientation = '';
    order.color = 'RGB';
    order.rate = 20; // default demo rate
    order.copies = copies;
    order.total = order.rate * copies;
    showSummary();
  }

  // show summary
  function showSummary(){
    document.getElementById('sumService').textContent = order.service;
    document.getElementById('sumPaperSize').textContent = order.paperSize;
    document.getElementById('sumOrientation').textContent = order.orientation || 'N/A';
    document.getElementById('sumColor').textContent = order.color;
    document.getElementById('sumRate').textContent = order.rate.toFixed(2);
    document.getElementById('sumCopies').textContent = order.copies;
    document.getElementById('sumTotal').textContent = order.total.toFixed(2);

    document.getElementById('step3').classList.remove('hidden');
    // hide step2 sections
    document.getElementById('step2').classList.add('hidden');
    window.scrollTo(0,0);
  }

  // Place Order form
  function showPlaceOrderForm(){
    document.getElementById('placeOrder').classList.remove('hidden');
    document.getElementById('step3').classList.add('hidden');
    window.scrollTo(0,0);
  }

  function gotoPayment(){
    // validate delivery fields
    const dist = document.getElementById('districtSelect').value;
    const pin = document.getElementById('pincode').value.trim();
    const village = document.getElementById('village').value.trim();
    const phone = document.getElementById('phone').value.trim();
    if(!dist || !pin || pin.length !== 6 || !village || !phone || phone.length !== 10){
      alert('Please complete correct delivery details (district, 6-digit pincode, village/town, 10-digit phone).');
      return;
    }
    // save
    order.delivery = { state: 'Assam', district: dist, pincode: pin, village: village, phone: phone };
    document.getElementById('placeOrder').classList.add('hidden');
    document.getElementById('payment').classList.remove('hidden');
    window.scrollTo(0,0);
  }

  function onPaymentChange(){
    const val = document.querySelector('input[name="pay"]:checked').value;
    document.getElementById('upiArea').classList.toggle('hidden', val !== 'upi');
    document.getElementById('codArea').classList.toggle('hidden', val !== 'cod');
    document.getElementById('finalMsg').classList.add('hidden');
    document.getElementById('finalMsg').textContent = '';
  }

  // Simulate UPI verification (simple pattern check)
  function verifyUpi(){
    const upi = document.getElementById('upiId').value.trim();
    const status = document.getElementById('upiStatus');
    if(!upi || upi.indexOf('@')<1){ status.textContent = 'Invalid UPI format. Example: name@bank'; status.style.color='red'; return; }
    // simulate verification success
    status.textContent = `UPI ID ${upi} verified (simulated). You may proceed to pay.`;
    status.style.color = 'green';
  }

  // Simulate UPI payment via quick links
  function simulateUpiPayment(app){
    // first check UPI verified (loosely)
    const upi = document.getElementById('upiId').value.trim();
    const status = document.getElementById('upiStatus');
    if(!upi || upi.indexOf('@')<1 || status.textContent.indexOf('verified')<0){
      alert('Please enter and verify a valid UPI ID before paying, or use COD.');
      return;
    }
    // simulate payment success
    setTimeout(() => {
      completeOrder('upi', app);
    }, 600); // simulated delay
  }

  function completeOrder(method, app){
    // finalize, simulate server-side confirmation
    document.getElementById('finalMsg').classList.remove('hidden');
    let msg = '';
    if(method==='cod'){
      msg = `Order confirmed as Cash on Delivery. Your order will be delivered to ${order.delivery.village}, ${order.delivery.district}, Assam (Pincode: ${order.delivery.pincode}) within 7 days.`;
    } else {
      msg = `Payment received via ${app || 'UPI'}. Thank you — your order will be delivered to ${order.delivery.village}, ${order.delivery.district}, Assam (Pincode: ${order.delivery.pincode}) within 7 days.`;
    }
    document.getElementById('finalMsg').textContent = msg;

    // show closing behaviour: after confirming, reset to home (simulate closing window and redirect to home)
    setTimeout(()=> {
      alert('Thank you! Your order has been placed. You will be redirected to home.');
      goHome();
    }, 900); // short pause to let user read message
  }

  // Cancel / go home (reset)
  function goHome(){
    // reset order object
    order = { service:null, paperSize:null, orientation:'', color:null, rate:0, copies:0, total:0, delivery:{} };
    // hide all steps
    ['step2','step3','placeOrder','payment'].forEach(id=>document.getElementById(id).classList.add('hidden'));
    // show step1
    document.getElementById('step1').classList.remove('hidden');

    // reset forms (minimal)
    document.getElementById('serviceType').value = '';
    // letter reset
    document.getElementById('frontPage').value = '';
    document.getElementById('backPage').value = '';
    document.getElementById('paperSize').value = '';
    document.getElementById('colorOption').value = '';
    document.getElementById('copies').value = '';
    document.getElementById('letterNeedDesign').checked = false;
    document.getElementById('letterDesignForm').classList.add('hidden');
    document.getElementById('uploadLetter').value = '';
    document.getElementById('designPaperSize').value = '';
    document.getElementById('checkConfirm').checked = false;
    document.getElementById('orderOptions').classList.add('hidden');
    document.getElementById('designCopies').value = '';
    document.getElementById('designColor').value = '';
    document.getElementById('letterRateInfo').textContent = '';
    document.getElementById('designRateInfo').textContent = '';
    // certificate reset
    document.getElementById('certUpload').value = '';
    document.getElementById('certNeedDesign').checked = false;
    document.getElementById('certDesignArea').classList.add('hidden');
    document.getElementById('certDesignUpload').value = '';
    document.getElementById('certOrientation').value = 'Portrait';
    document.getElementById('certPaperSize').value = '';
    document.getElementById('certCopies').value = '';
    document.getElementById('certRateInfo').textContent = '';
    // card reset
    document.getElementById('cardUpload').value = '';
    document.getElementById('cardPaper').value = 'A5';
    document.getElementById('cardCopies').value = '';
    // place order reset
    document.getElementById('districtSelect').value = '';
    document.getElementById('pincode').value = '';
    document.getElementById('village').value = '';
    document.getElementById('phone').value = '';
    // payment reset
    document.querySelector('input[name="pay"][value="upi"]').checked = true;
    document.getElementById('upiId').value = '';
    document.getElementById('upiStatus').textContent = '';
    document.getElementById('finalMsg').classList.add('hidden');
    document.getElementById('finalMsg').textContent = '';
    document.getElementById('upiArea').classList.remove('hidden');
    document.getElementById('codArea').classList.add('hidden');

    window.scrollTo(0,0);
  }
</script>
</body>
</html>
